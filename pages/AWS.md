- EKS = Managed [[Kubernetes]].
	- https://aws.github.io/aws-eks-best-practices/
	- Facts
		- Support encrypting secrets with KMS.
	- Authentication + Authorization (i.e. within the cluster)
		- "Principle"s are _authenticated_ via IAM (via `sts:GetCallerIdentity`)
		- "Principle"s are _authorized_ via Kubernetes RBAC
		- done using the aws-iam-authenticator
		  collapsed:: true
			- https://github.com/kubernetes-sigs/aws-iam-authenticator
			- who's configuration is in the `aws-auth` ConfigMap:
				- ```
				  kubectl describe -n kube-system configmap/aws-auth
				  ```
				- This is the mapping of AWS IAM Principals (users and roles) to RBAC authorizations
				- In fact, there are three "backend" options (`--backend-mode`)
					- `MountedFile` (default)
						- data from the primary configuration file.
					- `CRD`
						- same data that's in the ((63c332d6-f257-46e2-b2f7-e49bf0f3df3b)), but with CRD benefits like validation.
					- `EKSConfigMap`
					  id:: 63c332d6-f257-46e2-b2f7-e49bf0f3df3b
						- this is the one used by EKS as of 2023-01
			- started by Heptio; maintained by AWS OSS engineering
			- primarily: [Nicholas Turner](https://github.com/nckturner)
		- ref: https://docs.aws.amazon.com/eks/latest/userguide/cluster-auth.html
	-
- KMS = Key Management Service
	- These are your _encryption keys_ not your encrypted data.
		- they are _used_ by other services to perform encryption.
		-
	- FIPS 140-2 validated hardware
	  collapsed:: true
		- https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.140-2.pdf
		- FIPS = Federal Information Processing Standard
		- Security Level 1
			- No physical security required
			- Can run on a general purpose compute (on an unevaluated OS)
			- e.g. PC encryption board
		- Security Level 2
			- Must have tamper-evident coating (on locks and doors)
			- Must have Role-Based authentication
			- Can run on general purpose compute, but must be EAL2 (or higher)
		- Security Level 3
		  id:: 63ba10e3-db0d-49a6-a2d9-56d031a2c9b1
			- Must be in a strong enclosure
			- Must zero-out plaintext CSP when doors/covers are opened/removed
			- Must use Identity-based authentication
		- Security Level 4
			- Must zero-out plaintext CSP when _any_ unauthorized access is attempted, or if the device is used outside of normal operating voltages or temperatures
	- There are multiple key source options
		- KMS, itself
		- CloudHSM (Hardware Security Module) — FIPS 104-2, ((63ba10e3-db0d-49a6-a2d9-56d031a2c9b1)) validated
			- This is a _cluster_ of hardware modules
- Secrets Manager
	- Pricing:
		- 30-day free trial
		- $0.40 / secret / month; $0.05 / 10,000 API calls
	- Rotation
		- https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotating-secrets.html
		- You configure a Lambda function that performs the rotation
			- https://docs.aws.amazon.com/secretsmanager/latest/userguide/rotate-secrets_turn-on-for-other.html#rotate-secrets_turn-on-for-other_step5
			- The function must be written securely.
			  collapsed:: true
				- For example, can't succumb to the "Confused Deputy" problem
					- https://docs.aws.amazon.com/IAM/latest/UserGuide/confused-deputy.html
- Identity & Access Management (IAM)
	- Q: What is an IAM Policy?
	  collapsed:: true
		- There are six kinds of policies (in order of frequency of use)
			- identity-based policies
				- "managed" — created independently and attached to one or more "identities"
				- "inline" — created directly on an "identity"
			- resource-based policies
			- permissions boundaries
			- Organizations SCPs
			- ACLs
			- Session Policies
			-
	- Q: How do I determine which identity is being used?
	- Identity Federation ~ IAM integrates with IdPs that are compatible with [[OIDC]] or SAML 2.0
	-
		-
		-